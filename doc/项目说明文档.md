# 1. 引言

## 1.1 背景

随着人工智能特别是大语言模型（Large Language Models, LLM）技术的迅速发展，传统的信息检索和内容推荐方式正在被更自然、更智能的交互形式所取代。在电影推荐领域，用户越来越倾向于通过自然语言进行个性化表达，而非依赖传统的打分筛选和预设标签。

本项目基于大语言模型构建一个智能电影推荐系统，用户通过自然语言与系统进行对话，系统自动理解其兴趣偏好，并结合权威电影信息平台（如豆瓣）和本地生活服务平台（如美团），完成从电影推荐、影院查询到路线导航的完整闭环服务流程，为用户提供一站式观影决策支持。

## 1.2 目的

本项目旨在构建一个融合大语言模型、外部数据源和本地服务能力的智能电影推荐平台。系统通过对用户自然语言对话内容的语义理解，自动提取用户兴趣画像，结合豆瓣电影评分与评论等信息，生成个性化推荐列表。同时，系统接入美团API查询用户附近上映该电影的影院信息，并根据用户需求调用导航API规划前往路线，最终为用户提供从筛片、选座到出行的全流程服务支持。

项目的目标包括但不限于：

- 利用大语言模型实现自然语言交互式电影偏好理解；
- 建立用户画像并驱动个性化推荐逻辑；
- 集成豆瓣API，获取高质量电影信息；
- 对接猫眼API，实时查询影院排片情况；
- 提供路径规划功能，支持多种出行方式；
- 构建可扩展的推荐系统框架，为后续功能拓展提供基础。

## 1.3 定义

| 术语/缩写 | 说明 |
|-----------|------|
| LLM       | Large Language Model，大语言模型，用于自然语言理解与生成 |
| API       | Application Programming Interface，应用程序编程接口 |
| 豆瓣API   | 提供电影评分、评论、简介等数据的公开接口 |
| 美团API   | 提供影院排片、座位余量等本地服务信息接口 |
| 导航API   | 提供路线规划能力的地图服务接口（如高德、百度等） |
| 用户画像 | 用户兴趣标签、偏好类型、历史行为等结构化描述信息 |
| 多轮对话 | 用户与系统进行多轮交互，系统需保持上下文语境 |

## 1.4 参考资料

- 猫眼开放平台：https://apis.netstart.cn/maoyan/
- 高德地图开放平台：https://lbs.amap.com/
- 百度地图开放平台：https://lbsyun.baidu.com/
- OpenAI/通义千问/百川等主流大语言模型 API 文档
- 项目内部技术设计文档与系统接口规范
# 2. 项目概述
## 2.1 项目功能

本项目围绕用户的电影观影需求，构建了一个以大语言模型为核心驱动的多功能推荐与辅助系统。系统融合语义理解、电影数据检索、影院服务信息和路线导航，为用户提供从“想看什么”到“去哪看”的完整服务流程。

系统主要功能包括以下六个方面：

### 1. 用户兴趣理解与提取（user_interest_extract）

- **功能描述**：结合千问API，通过Prompt构建从用户输入（文本或按钮筛选）中提取兴趣信息，生成结构化的用户画像。
- **输入形式**：
  - 用户自然语言输入（如“我想看轻松点的喜剧片”）
  - 用户选择的筛选标签（如“动作”、“今天”、“情侣”）
- **提取字段**（字段提取失败则返回空）：
  - 时间：如今天、明天、周末（用于推荐热映/新片）
  - 地理位置：用于附近影院推荐
  - 性别、年龄段、群体类型（如亲子/情侣/独自）
  - 影片类型、导演/演员偏好、其他自由文本要求
  - **情绪分析**：识别用户输入中的情感倾向，辅助推荐匹配风格
- **输出结果示例**：
  ```json
  {
    "时间": "今天",
    "类型": "喜剧",
    "情绪": "放松",
    "群体": "情侣",
    "演员": "黄渤"
  }

---

### 2. 个性化电影推荐生成

- **功能描述**：基于用户画像，结合电影评分、评论口碑、上映时间等多维特征，生成个性化推荐列表。根据提取到的用户信息，调用豆瓣电影 API（可提供电影的名称、上映时间、评分、类型、内容简介、导演、演员等信息），进行个性化电影推荐。

- **推荐逻辑**：
  - 多标签匹配（类型、风格、演员等）；
  - 结合豆瓣评分与热度筛选候选电影；
  - 使用大模型生成推荐理由和对用户语言风格的回应；
- **输出形式**：
  - 推荐电影名称、评分、简介、推荐理由
  - 可选用户评价摘要（情绪分析后浓缩）

---

### 3. 猫眼电影信息集成查询

- **功能描述**：使用猫眼API获取指定电影的详细信息，用于丰富推荐内容与用户查询响应。
- **获取信息包括**：
  - 猫眼评分与星级分布
  - 剧情简介与主题标签
  - 主演、导演、上映年份、海报
  - 热门短评摘要

---

### 4. 附近影院排片信息查询（猫眼API）

- **功能描述**：结合用户所处位置，检索附近是否有放映目标电影的影院。
- **服务能力**：
  - 支持查询指定日期内的放映场次
  - 提供影院名称、地址、距离
- 猫眼api可以获取指定电影的详细信息，包括影片介绍和上映时间，影院排片，同时可以跳转到猫眼的购票链接

---

### 5. 路线导航与出行建议

- **功能描述**：在用户选定目标影院后，调用导航API生成到达路线，可选择驾车、公交、步行等方式。
- **输出内容**：
  - 推荐路线图（前端可视化）
  - 距离、耗时、途径路段、换乘节点
  - 多方案切换（最快 / 最短 / 推荐）

---

### 6. 多轮对话管理与语境保持

- **功能描述**：支持与用户进行多轮自然语言交互，持续跟踪对话上下文，实现连贯推荐与连续反馈。
- **语境保持内容**：
  - 最近查询的电影及影院信息
  - 用户提出的临时偏好或否定反馈（如“不喜欢恐怖片”）

---

### 附加功能预留（可扩展）

- 用户登录与偏好保存（长期画像）
- 节假日、热映榜单特殊场景适配
- 可视化推荐卡片（电影+影院+路线）

